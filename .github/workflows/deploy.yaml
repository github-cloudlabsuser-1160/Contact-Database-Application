name: Azure Web App Deployment

on:
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set up Azure CLI
      run: |
        az login --username ${{ secrets.AZURE_USERNAME }} --password ${{ secrets.AZURE_PASSWORD }}

    - name: Deploy to Azure
      uses: azure/arm-deploy@v1
      with:
        subscriptionId: 3f5dcaa7-8c81-4a8b-a30c-8e938d2a4d46
        resourceGroupName: GitHub-Copilot-Challenges
        template: ./deploy.json
        parameters: ./deploy.parameters.json